<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ê–∫–∞–ö–≤–∏–∑ ‚Äî –í—Ö–æ–¥ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      .theme-toggle {
        position: fixed;
        top: 15px;
        right: 15px;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 50%;
        width: 44px;
        height: 44px;
        cursor: pointer;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        z-index: 1000;
      }
      .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.4);
        transform: scale(1.1);
      }
      .auth-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        padding: 20px;
        background: #f8f9fa;
      }
      .auth-card {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 400px;
      }
      .auth-card h2 {
        text-align: center;
        margin-bottom: 20px;
      }
      input[type="password"] {
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
      }
      .btn-auth {
        width: 100%;
        padding: 12px;
        background: #6c5ce7;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .btn-auth:hover {
        background: #5a4bd9;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(108, 92, 231, 0.3);
      }
      .btn-auth:active {
        transform: translateY(0);
      }
      .error-msg {
        color: #e74c3c;
        text-align: center;
        margin-top: 10px;
        font-size: 14px;
        animation: shake 0.5s ease-in-out;
      }
      .hidden {
        display: none;
      }

      /* –ê–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }

      @keyframes slideIn {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #6c5ce7;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .loading-text {
        display: inline-block;
        margin-left: 10px;
        animation: pulse 1.5s infinite;
      }

      .fade-in {
        animation: fadeIn 0.5s ease-out;
      }

      .slide-in {
        animation: slideIn 0.3s ease-out;
      }

      .bounce-animation {
        animation: bounce 1s infinite;
      }

      .pulse-animation {
        animation: pulse 1s infinite;
      }

      /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
      .card,
      .btn,
      .custom-select,
      input,
      select {
        transition: all 0.3s ease;
      }

      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .custom-select:hover,
      input:hover {
        border-color: #6c5ce7;
        box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
      }
    </style>
  </head>
  <body class="host-body">
    <button class="theme-toggle" id="themeToggle" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">üåô</button>
    <div id="auth-screen" class="auth-container">
      <div class="auth-card">
        <h2>üîê –í—Ö–æ–¥ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ</h2>
        <input type="password" id="host-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" />
        <button class="btn-auth" id="submit-password">–í–æ–π—Ç–∏</button>
        <div id="auth-error" class="error-msg hidden"></div>
      </div>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° (—Å–∫—Ä—ã—Ç –¥–æ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) -->
    <div id="main-interface" class="host-wrapper hidden">
      <div class="host-wrapper">
        <header id="setup-area" class="card">
          <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–≤–∏–∑–∞</h2>
          <div class="setup-controls">
            <select id="quiz-select" class="custom-select"></select>
            <label class="checkbox-label">
              <input type="checkbox" id="shuffle-questions" />
              –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã
            </label>
            <label class="checkbox-label">
              –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤
              <select
                id="question-count"
                class="custom-select"
                style="width: 120px; margin-left: 10px"
              >
                <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
              </select>
            </label>
            <label class="checkbox-label">
              –í—Ä–µ–º—è –Ω–∞ –æ—Ç–≤–µ—Ç (—Å–µ–∫)
              <select id="time-limit" class="custom-select" style="width: 100px; margin-left: 10px">
                <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
              </select>
            </label>
            <button id="load-btn" class="btn secondary">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã</button>
          </div>
        </header>

        <section id="lobby" class="card">
          <div class="card-header">
            <h3>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≤ –ª–æ–±–±–∏</h3>
            <span id="player-count-badge" class="badge">0</span>
          </div>
          <div id="player-names" class="player-grid">
            <p class="empty-msg">–û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞...</p>
          </div>
          <button id="start-game-btn" class="btn primary" disabled>–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–≤–∏–∑</button>
        </section>

        <main id="game-area" class="card main-game hidden">
          <button
            id="reset-btn"
            class="btn secondary hidden"
            style="margin-top: 20px; background: #fab1a0"
          >
            –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –∫–≤–∏–∑
          </button>

          <div class="game-header">
            <div class="question-counter">
              –í–æ–ø—Ä–æ—Å <span id="q-num">1</span> –∏–∑ <span id="q-total">10</span>
            </div>
            <div id="timer-display" class="timer-circle">--</div>
            <div class="game-info">
              <h1 id="question-area">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞...</h1>
            </div>
          </div>

          <div id="stats-container" class="stats-visualizer"></div>

          <div class="controls">
            <button id="pause-btn" class="btn secondary" style="margin-right: 10px">
              ‚è∏Ô∏è –ü–∞—É–∑–∞
            </button>
            <button id="next-btn" class="btn primary">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ‚Üí</button>
          </div>
        </main>

        <aside id="leaderboard-area" class="card hidden">
          <h3>üèÜ –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h3>
          <ul id="leaderboard-list"></ul>
        </aside>

        <aside id="analytics-area" class="card hidden">
          <h3>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤</h3>
          <div class="analytics-controls">
            <button id="show-overall-analytics" class="btn secondary">
              –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º
            </button>
            <button id="show-question-analytics" class="btn secondary">
              –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–µ–∫—É—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
            </button>
            <button id="export-csv-btn" class="btn secondary">üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</button>
            <button id="export-xlsx-btn" class="btn primary">üìà –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel</button>
          </div>
          <div id="analytics-content" class="analytics-content"></div>
        </aside>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/host.js"></script>
  </body>
</html>
